(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[426],{17604:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/super-admin/courses/edit",function(){return l(44776)}])},44776:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return c}});var a=l(85893),i=l(11163),r=l(67294),n=l(95054),o=l(70853),s=l(61603);function c(e){var t,l,c,u,d,p,m,v,f;let{solve:h,Page:g}=e,y=(0,i.useRouter)(),[b,_]=r.useState(null),[k,x]=r.useState({}),[N,E]=r.useState(null),[w,C]=r.useState(!1),[q,Z]=r.useState(null!==(p=null===(t=y.query)||void 0===t?void 0:t.page)&&void 0!==p?p:null),[P,R]=r.useState({step0:null!==(m=null==b?void 0:null===(l=b.cu)||void 0===l?void 0:l.type)&&void 0!==m?m:"cash",step2:"free"});r.useEffect(()=>{var e,t,l;q!==(null===(e=y.query)||void 0===e?void 0:e.page)&&(null===(t=y.query)||void 0===t?void 0:t.page)&&Z(null===(l=y.query)||void 0===l?void 0:l.page)},[y.query]),r.useEffect(()=>{h.Request({config:{url:"online-class/meetings?".concat("page=".concat(null!=q?q:1)),method:"get",paginate:!0},dependencies:{data:[N,E]}}).then(e=>console.log(e.data.data))},[]),r.useEffect(()=>{if(h.Router.query.get("id")&&!b){let e=h.Router.query.get("id");h.Request({config:{url:"courses/".concat(e),pointer:"cu",method:"get"},dependencies:{callback(t){var l;let a={cu:null==t?void 0:null===(l=t.data)||void 0===l?void 0:l.data};h.Request({config:{url:"all-users-without-paginate",pointer:"pg",method:"get"},dependencies:{callback(t){var l;let i={pg:null==t?void 0:null===(l=t.data)||void 0===l?void 0:l.data};h.Request({config:{url:"get-course-members/".concat(e),pointer:"mems",method:"get"},dependencies:{callback(e){var t;let l={mems:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.data};h.Request({config:{url:"classrooms",pointer:"cls",method:"get"},dependencies:{callback(e){var t;let r={cls:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.data};h.Request({config:{url:"all-orgs-without-paginate",pointer:"orgs"},dependencies:{callback(e){var t;let n={orgs:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.data};h.Request({config:{url:"categories",pointer:"cat"},dependencies:{callback(e){var t;let o={cat:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.data};_({...a,...i,...l,...r,...n,...o})}}})}}})}}})}}})}}})}}})}},[b,h]);let{classrooms:j,organizations:F,sections:S,categories:T,title:z,id:O}=null!==(v=null==b?void 0:b.cu)&&void 0!==v?v:{};return(0,a.jsx)(o.Z,{solve:h,header:{title:(0,a.jsxs)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:["ویرایش دوره",(0,a.jsx)("small",{style:{marginRight:".5rem"},children:"/"}),(0,a.jsx)("span",{style:{marginRight:".5rem",display:"flex"},children:h.Convert.withBadge({val:h.Convert.toPe(z),color:"violet"})})]})},content:b?{step0:{label:"مشخصات",btn:{action:"back"},form:{config:{url:"courses/".concat(null===(c=y.query)||void 0===c?void 0:c.id,"?_method=PUT"),content_type:"multipart/form-data",route:!0,push_notif:!0,initial:{title:b.cu.title,description:b.cu.description,price:b.cu.price,type:b.cu.type,time:b.cu.time,body:b.cu.body}},structure:[[{input:{name:"title",type:"text",placeholder:"نام دوره"},flex:.5},{input:{name:"description",placeholder:"توضیح مختصر",addon:{last:{prompt:"SP-counter-150"}}}}],[{select:{placeholder:"نوع",data:[{title:"نقدی",value:"cash"},{title:"رایگان",value:"free"}],args:{defaultValue:b.cu.type},name:"type",callback(e){P!==e.val&&R({...P,step0:e.val})}}},{input:{type:"price",name:"price",direction:"ltr",placeholder:"۰",addon:{first:{prompt:"قیمت"},last:{prompt:"تومان"}},disabled:(null==P?void 0:P.step0)!=="cash"}},{input:{name:"time",addon:{first:{prompt:"مدت زمان"},last:{prompt:"ث:د:س"}},masked:!0,showMask:!0,guide:!0,placeholderChar:"۰",mask:[/[\u06F0-\u06F90-9]/,/[\u06F0-\u06F90-9]/,":",/[\u06F0-\u06F90-9]/,/[\u06F0-\u06F90-9]/,":",/[\u06F0-\u06F90-9]/,/[\u06F0-\u06F90-9]/],keepCharPositions:!0,direction:"ltr"}}],[{upload:{prompt:"تصویر دوره را انتخاب کنید",name:"image"}}],[{input:{type:"textarea",placeholder:"توضیحات تکمیلی",name:"body"}}]]}},step1:{label:"دسته بندی",btn:{action:"back"},form:{config:{url:"add-course-to-category",initial:{course_id:+(null===(u=y.query)||void 0===u?void 0:u.id)}},structure:[[{select:{name:"category_ids",data:null==b?void 0:b.cat,multi:!0,placeholder:"انتخاب دسته بندی ها",args:{defaultValue:Array.isArray(null==b?void 0:b.cat)?null==b?void 0:null===(d=b.cat)||void 0===d?void 0:d.map(e=>null==e?void 0:e.id):null}}}]]}},step2:{label:"ارتباطات",btn:{action:"back"},view:{structure:{tabs:{data:[{label:"موسسات",cta:{prompt:"افزودن موسسه",modal:{header:"افزودن دوره به موسسه",body:(0,a.jsx)(s.Z,{config:{url:"add-course-to-organization",initial:{course_id:O+"",organization_id:""},callback:()=>y.reload()},structure:[[{select:{name:"organization_id",placeholder:"انتخاب موسسه",data:null==b?void 0:b.orgs,searchable:!0}}]]})}},content:{view:{config:{},structure:{table:{data:F,columns:[{title:"#",type:"id"},{title:"لوگو",type:"logo",key:"logo_img"},{title:"نام موسسه",type:"title",align:"right"},{title:"مدیر",type:"manager",key:"manager"},{title:"عملیات ها",type:"actions",actions:[{key:"delete",url:"detach-course-from-organization",method:"post"}]}]}}}}},{label:"کلاس ها",cta:{prompt:"افزودن کلاس",modal:{header:"افزودن کلاس به دوره",body:(0,a.jsx)(s.Z,{config:{url:"add-classroom-to-course",initial:{course_id:O+"",type:"free",price:"0"},callback:()=>y.reload()},structure:[[{select:{name:"classroom_id",placeholder:"انتخاب کلاس",data:null==b?void 0:b.cls,searchable:!0}}],[{select:{name:"type",placeholder:"نوع",value:"free",data:[{title:"نقدی",value:"cash"},{title:"رایگان",value:"free"}]}},{input:{name:"price",type:"price",placeholder:"۰",direction:"ltr",disabled:(null==P?void 0:P.step2)==="free",addon:{first:{prompt:"قیمت"},last:{prompt:"تومان"}}}}]]})}},content:{view:{config:{},structure:{accord:{entries:null!=j?j:[],ctas:[{prompt:"حذف کلاس از دوره",color:"red",onClick(e){var t;C(!1),h.Page.modal({header:"حذف",body:(0,a.jsxs)("div",{children:["آیا نسبت به حذف کلاس '".concat(null==e?void 0:e.title,"' از دوره '").concat(b.cu.title,"' مطمئن هستید؟"),(0,a.jsxs)("div",{children:[null!==w&&h.Convert.withBadge({val:(0,a.jsx)("label",{children:"حذف تمامی کاربران کلاس از دوره"}),color:"red"})," ",(0,a.jsx)(n.Z,{onChange:(e,t)=>C({...w,cls:t})})]})]}),footer:[{prompt:"حذف",color:"red",state:null!==(t=null==k?void 0:k.clsDelete)&&void 0!==t?t:"init",handleClick(){var t;x({...k,clsDelete:"loading"}),h.Request({config:{url:"detach-classroom-from-course",method:"post",req_data:{course_id:b.cu.id,classroom_id:null==e?void 0:e.id,delete_all_class_members_from_course:null!==(t=null==w?void 0:w.cls)&&void 0!==t&&t},push_notif:!0},dependencies:{callback(e){x({...k,orgDelete:"success"}),y.reload()}}})}}]})}}]}}}}},{label:"کاربران",cta:{prompt:"افزودن کاربر",modal:{header:"افزودن کاربر به دوره",body:(0,a.jsx)(s.Z,{config:{url:"add-user-to-course-member",initial:{course_id:O+""},callback:()=>y.reload()},structure:[[{select:{name:"user_id",placeholder:"انتخاب کاربر",data:null==b?void 0:b.pg,searchable:!0}}]]})}},content:{view:{config:{},structure:{table:{data:null!==(f=null==b?void 0:b.mems)&&void 0!==f?f:[],autoHeight:null,fillHeight:null,columns:[{title:"#",type:"id",key:"user_id"},{title:"نام و نام و خانوادگی",type:"title",key:"name",align:"right"},{title:"شماره تلفن",type:"phone",key:"phone"},{title:"عملیات ها",type:"actions",actions:[{key:"delete",url:"delete-course-user",method:"post"}]}]}}}}}]}}}},step3:{label:"سرفصل ها",btn:{action:"back"},sections:{data:b}}}:{loader:{}}})}},9008:function(e,t,l){e.exports=l(83121)},35585:function(e,t,l){"use strict";l.d(t,{Z:function(){return h}});var a=l(87462),i=l(63366),r=l(67294),n=l(45697),o=l.n(n),s=l(3743);function c(e,t,l){var a=0;return r.Children.map(e,function(e){if(!r.isValidElement(e))return e;var i=t.call(l,e,a);return a+=1,i})}var u={mapCloneElement:function(e,t,l){return c(e,function(e,l){return r.cloneElement(e,(0,a.Z)({key:l},t(e,l)))},l)},count:function(e){return r.Children.count(Array.isArray(e)?e.filter(function(e){return e}):e)},some:function(e,t,l){var a=0,i=!1;return r.Children.forEach(e,function(e){!i&&r.isValidElement(e)&&t.call(l,e,a+=1)&&(i=!0)}),i},map:c,find:function(e,t,l){var a,i=0;return r.Children.forEach(e,function(e){!a&&(i+=1,t.call(l,e,i)&&(a=e))}),a}},d=l(56709),p=l(28301),m={finish:r.createElement(d.Z,null),wait:null,process:null,error:r.createElement(p.Z,null)},v=r.forwardRef(function(e,t){var l,n,o=e.as,c=e.className,u=e.classPrefix,d=e.style,p=e.itemWidth,v=e.status,f=e.icon,h=e.stepNumber,g=e.description,y=e.title,b=(0,i.Z)(e,["as","className","classPrefix","style","itemWidth","status","icon","stepNumber","description","title"]),_=(0,s.Z)(void 0===u?"steps-item":u),k=_.merge,x=_.withClassPrefix,N=_.prefix,E=k(c,x(((l={custom:f})["status-"+v]=v,l))),w=(0,a.Z)({width:p},d),C=r.createElement("span",{className:N("icon","icon-"+v)},v&&null!==(n=m[v])&&void 0!==n?n:h);return f&&(C=r.createElement("span",{className:N("icon")},f)),r.createElement(void 0===o?"div":o,(0,a.Z)({},b,{ref:t,className:E,style:w}),r.createElement("div",{className:N("tail")}),r.createElement("div",{className:N(["icon-wrapper",f?"custom-icon":""])},C),r.createElement("div",{className:N("content")},r.createElement("div",{className:N("title")},y),g&&r.createElement("div",{className:N("description")},g)))});v.displayName="StepItem",v.propTypes={className:o().string,classPrefix:o().string,style:o().object,itemWidth:o().oneOfType([o().number,o().string]),status:o().oneOf(["finish","wait","process","error"]),icon:o().object,stepNumber:o().number,description:o().node,title:o().node};var f=r.forwardRef(function(e,t){var l=e.as,n=e.classPrefix,o=e.className,c=e.children,d=e.vertical,p=e.small,m=e.current,v=void 0===m?0:m,f=e.currentStatus,h=void 0===f?"process":f,g=(0,i.Z)(e,["as","classPrefix","className","children","vertical","small","current","currentStatus"]),y=(0,s.Z)(void 0===n?"steps":n),b=y.merge,_=y.prefix,k=y.withClassPrefix,x=!d,N=b(o,k({small:p,vertical:d,horizontal:!d})),E=r.Children.count(c),w=u.mapCloneElement(c,function(e,t){var l=(0,a.Z)({stepNumber:t+1,status:"wait",style:x?{flexBasis:t<E-1?100/(E-1)+"%":void 0,maxWidth:t===E-1?100/E+"%":void 0}:void 0},e.props);return"error"===h&&t===v-1&&(l.className=_("next-error")),!e.props.status&&(t===v?(l.status=h,l.className=b(l.className,_("item-active"))):t<v&&(l.status="finish")),l});return r.createElement(void 0===l?"div":l,(0,a.Z)({},g,{ref:t,className:N}),w)});f.Item=v,f.displayName="Steps",f.propTypes={classPrefix:o().string,vertical:o().bool,small:o().bool,className:o().string,children:o().node,current:o().number,currentStatus:o().oneOf(["finish","wait","process","error"])};var h=f}},function(e){e.O(0,[675,853,774,888,179],function(){return e(e.s=17604)}),_N_E=e.O()}]);